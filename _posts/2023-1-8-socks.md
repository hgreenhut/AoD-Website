---
layout: post
title: Socks
subtitle: Lab 2
# gh-repo: daattali/beautiful-jekyll
# gh-badge: [star, fork, follow]
# tags: [test]
# comments: true
author: Henry Greenhut
---
Author: Henry Greenhut
<br/>

---
**STEP 1: Creating the sock dataset**

To create the sock dataset, first I had to access a sock api using my key as a paremeter. The api works by responding with information about the sock whose index is specified as a paremeter in the request. The problem is that I didn't know the total number of socks, and therefore didn't know which indexes to request.

So, I build a while loop that, starting from 0 and increasing by 1, requests every sock until it does not receive a valid response. 
Every request will have the same base url: https://afeingoldhm.pythonanywhere.com/socks?key=\*\*\*\*\*\*\*\*&idx= (replace astericks with your own key). To request every sock, I increment the index until the requests stop being successful. 
```python
while not done:
  response = requests.get(url + str(index))
  if response.ok:
    data = response.json()
    # Store the sock
    index += 1
    print(index)
  else:
    done = True
```

Inside the while loop, I store information about the sock in a custom sock object. This is not necessary -- I could just write the information as I receive it, but if I ever wanted to do more with the socks in the future, having them already conveniently organized into sock objects could be useful.
```python
class Sock:
  def __init__(self, name, variation, color1, color2):
    self.name = name
    self.variation = variation
    self.color1 = color1
    self.color2 = color2
  def __str__(self):
    return f"{self.name},{self.variation},{self.color1},{self.color2}"
```

My sock class also has a custom print method to easily be converted into a csv. Where there is the '# Store the sock" comment in the first block of code, there are the following lines of code which add instances of the sock class to my list of socks:
```python
s = Sock(data["Name"], data["Variation"], data["Color 1"], data["Color 2"])
socks.append(s)
```python
Finally, we have a list of sock objects. I simply loop through them and write them to a new csv:

```python
with open ("finalsocks.csv", "w") as w:
  w.write("Name,Variation,Color1,Color2\n")
  for i in socks:
    w.write(str(i))
    w.write("\n")
```
